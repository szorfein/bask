# Full 64-bit means PAE and NX bit.
CONFIG_X86_64=y

CONFIG_ZONE_DMA=y
CONFIG_SMP=y

# Retpolines are needed to protect against Spectre v2. GCC 7.3.0 or higher is required.
CONFIG_RETPOLINE=y

CONFIG_SCHED_OMIT_FRAME_POINTER=y

CONFIG_PROCESSOR_SELECT=y

CONFIG_HPET_TIMER=y
CONFIG_DMI=y
CONFIG_NR_CPUS=32
CONFIG_SCHED_SMT=y
CONFIG_SCHED_MC=y
CONFIG_PREEMPT=y
CONFIG_X86_REROUTE_FOR_BROKEN_BOOT_IRQS=y
CONFIG_X86_MCE=y

CONFIG_NUMA=y
CONFIG_X86_64_ACPI_NUMA=y
CONFIG_NODES_SHIFT=4
CONFIG_SPARSEMEM_MANUAL=y
CONFIG_SPARSEMEM_VMEMMAP=y

CONFIG_BOUNCE=y
# Disallow allocating the first 64k of memory.
CONFIG_DEFAULT_MMAP_MIN_ADDR=65536
#CONFIG_MEMORY_FAILURE=y
#CONFIG_TRANSPARENT_HUGEPAGE=y
#CONFIG_TRANSPARENT_HUGEPAGE_MADVISE=y
#CONFIG_CLEANCACHE=y
#CONFIG_FRONTSWAP=y
CONFIG_ZPOOL=y
CONFIG_ZBUD=y
CONFIG_Z3FOLD=y
CONFIG_ZSMALLOC=y

CONFIG_X86_CHECK_BIOS_CORRUPTION=y
CONFIG_X86_BOOTPARAM_MEMORY_CORRUPTION_CHECK=y
CONFIG_X86_RESERVE_LOW=64

# Memory Type Range Registers can make speculative execution bugs a bit harder to exploit.
CONFIG_MTRR=y
CONFIG_MTRR_SANITIZER=y
CONFIG_MTRR_SANITIZER_ENABLE_DEFAULT=1
CONFIG_MTRR_SANITIZER_SPARE_REG_NR_DEFAULT=0

# Page Attribute Tables are the modern equivalents of MTRRs
CONFIG_X86_PAT=y

# Enable the RDRAND instruction to benefit from a secure hardware RNG if supported. 
CONFIG_ARCH_RANDOM=y

CONFIG_X86_SMAP=y
CONFIG_X86_UMIP=y

CONFIG_HZ_1000=y
CONFIG_HZ=1000

CONFIG_ARCH_MMAP_RND_BITS=32
CONFIG_PHYSICAL_START=0x1000000
CONFIG_RELOCATABLE=y
# Randomize position of kernel and memory.
CONFIG_RANDOMIZE_BASE=y
CONFIG_PHYSICAL_ALIGN=0x1000000
CONFIG_RANDOMIZE_MEMORY=y
CONFIG_RANDOMIZE_MEMORY_PHYSICAL_PADDING=0x1

# Modern libc no longer needs a fixed-position mapping in userspace, remove it
as a possible target.
CONFIG_LEGACY_VSYSCALL_NONE=y

CONFIG_X86_PM_TIMER=y
CONFIG_X86_ACPI_CPUFREQ=y

CONFIG_CRYPTO_CRCT10DIF_PCLMUL=y

CONFIG_XZ_DEC_X86=y
